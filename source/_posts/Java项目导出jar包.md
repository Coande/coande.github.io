title: Java项目导出jar包
date: 2016-02-03 18:53:25
tags:
	- Java
	- jar包
categories:
	- 技巧
---
虽然接触Java一年多了，但是一直没有怎么试过导出一个项目为jar包的形式，都是整个项目文件导出导入eclipse，没有eclipse就不知道怎么运行了。前几天写了个慕课网视频批量下载工具，想平时在没有eclipse的情况下都可以使用，那就得导出成jar包形式了。网上找了教程，大多都说导出时使用JAR file的形式进行导出，如果项目有引用的外部jar包时要用什么语言啊，写脚本啊，或者装个插件啊，怎样怎样的说的很复杂，有的干脆避开不说有引用外部jar包的导出方法，吓得我还以为很难~~

<!--more-->
下面以我的经验说说怎么导出jar包，不用写什么脚本，不用装什么插件，就eclipse简单搞定。有什么不妥欢迎指正~~

eclipse导出jar时有两个导出选项，一个是`Jar file`，另一个是`Runnable Jar file`。

**Jar file**

第一种情况：

没有引包的情况下，直接这个选项导出就行了。对项目右键，或者项目只有一个包的话对包右键，或者项目只有一个类的话对该类右键（都可以），选Export进行导出，一路next，需要设置的是选择导出的路径和Main class，导出后就可以在命令行中`java -jar name.jar`（name是jar包的名字）进行运行了。

第二种情况：

如果有引用其它包，右键项目或者包或者类（都可以），Export导出自己项目（第一种情况那样导出，没有主类则不用选择主类，项目拆散分多次进行导出也没问题）。有引用其它包还没有导出则复制出来，随便路径都可以，然后只要修改一下主类所在jar包的里的`MANIFEST.MF`文件即可（右键用解压缩软件打开，META-INF文件夹下）。这个文件需要修改或添加两个属性，分别是`Class-Path`和`Main-Class`。Class-Path的属性值是其它所有jar包的路径，不同路径以空格隔开即可。Main-Class属性值则是主类的类全名。修改好如下（这里我是按包来导出的，其它jar包都在相同目录下，所以直接使用文件名作为相对路径），注意空格：
```
Manifest-Version: 1.0
Main-Class: com.e12e.main.Main
Class-Path: com.e12e.service.jar org.json.jar jsoup-1.8.3.jar
```
修改后保存，在命令行中`java -jar name.jar`（name是jar包的名字）进行运行即可。

**Runnable Jar file**
这种方法导出最容易，连引用的jar包都一起导出了，免了修改`MANIFEST.MF`的步骤。导出时需要设置的是主类和导出的位置。导出后在命令行中`java -jar name.jar`（name是jar包的名字）进行运行即可。
<br>
如果项目下有其它资源，如图片，配置文件等，导出jar包后复制这些文件到jar包相同目录下即可。

如果为了方便，可以写一个批处理，如名字`run.bat`，文件内容如下：
```
java -jar name.jar
```
下次不用打开命令行，双击一下run.bat就可以运行起来了。如果是GUI程序则不需要这样，直接双击jar包即可运行，命令行程序则需要这行这条命令才能看到运行情况。有个小技巧，如果某个程序运行不起来，可以打开cmd在命令行里进行运行，就可以看到错误信息了。

为了我们的Java程序在别人的没有安装Java环境的电脑上运行，可以叫使用者安装Java环境jre，也可以我们自带jre。自带jre的话，在命令行中使用自带jre的bin目录下的`java.exe`进行运行程序，如：
```
.\jre\bin\java -jar .\imoocDownloader.jar
```
需要注意的是自带jre需要区分32位和64位，jre体积比较大，可以自己适当删除不需要用到的大文件进行精简。自带jre也可以如上自己写成批处理就可以方便运行程序了。


