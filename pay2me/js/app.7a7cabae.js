(function(t){function e(e){for(var n,s,o=e[0],c=e[1],u=e[2],d=0,h=[];d<o.length;d++)s=o[d],r[s]&&h.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(h.length)h.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"07bb":function(t,e,a){},"50c4":function(t,e,a){},5429:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=(a("28a5"),a("386d"),{getQueryVariable:function(t){for(var e=window.location.search.substring(1),a=e.split("&"),n=0;n<a.length;n++){var r=a[n].split("=");if(r[0]==t)return r[1]}return""}}),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.showMake?a("make-page"):t._e(),t.showMake?t._e():a("result-page")],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-header"},[t._v("制作多合一收款码")]),a("div",{staticClass:"page-content"},[t._l(t.dataList,function(e,n){return a("div",{key:n},[a("label",{staticClass:"picker-button",class:[e.result?"is-active":""],attrs:{for:n+"File"}},[t._v("选择"+t._s(e.name)+"收款码")]),a("input",{ref:n,refInFor:!0,staticClass:"hidden-input",attrs:{id:n+"File",type:"file",accept:"image/jpeg, image/jpg, image/png"},on:{change:function(e){return t.handleChange(arguments[0],n)}}})])}),a("div",[a("button",{staticClass:"submit-button",on:{click:t.handleSubmit}},[t._v("合成")])])],2)])},c=[],u=(a("7f7f"),a("f559"),a("ecec")),l=a.n(u),d={name:"app",components:{},data:function(){return{CANVASMAXWIDTH:400,CANVASMAXHEIGHT:600,dataList:{alipay:{name:"支付宝",result:"",startsWith:"https://qr.alipay.com/"},wechat:{name:"微信",result:"",startsWith:"wxp://"},qq:{name:"QQ",result:"",startsWith:"https://i.qianbao.qq.com/wallet/sqrcode.htm?m=tenpay&f=wallet&u="}}}},methods:{handleChange:function(t,e){var a=this,n=t.target.files[0];if(n){var r,i,s,o,c=new Image;c.src=URL.createObjectURL(n),c.onload=function(){r=c.width,i=c.height,(r>a.CANVASMAXWIDTH||i>a.CANVASMAXHEIGHT)&&(r/i>a.CANVASMAXWIDTH/a.CANVASMAXHEIGHT?(s=a.CANVASMAXWIDTH,o=s/r*i):(o=a.CANVASMAXHEIGHT,s=o/i*r));var t=document.createElement("canvas");t.width=s,t.height=o;var n=t.getContext("2d");n.drawImage(c,0,0,s,o);var u=n.getImageData(0,0,s,o),d={};try{d=l()(u.data,Math.floor(s),Math.floor(o))}catch(h){return void alert("无法识别二维码")}d&&d.data?d.data.startsWith(a.dataList[e].startsWith)?a.dataList[e].result=d.data:alert("不是".concat(a.dataList[e].name,"收款码")):alert("找不到二维码")}}},handleSubmit:function(){var t=this.dataList.alipay.result,e=this.dataList.wechat.result,a=this.dataList.qq.result,n=[];t&&n.push("alipay=".concat(encodeURIComponent(t))),e&&n.push("wechat=".concat(encodeURIComponent(e))),a&&n.push("qq=".concat(encodeURIComponent(a))),n.length?-1===window.location.href.indexOf("?")?window.location.href="".concat(window.location.href,"?").concat(n.join("&")):window.location.href="".concat(window.location.href,"&").concat(n.join("&")):alert("请先选择二维码")}}},h=d,p=(a("93b6"),a("2877")),f=Object(p["a"])(h,o,c,!1,null,"5c83c802",null),m=f.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-header"},t._l(t.showDataList,function(t,e){return a("i",{key:e,class:["iconfont","icon-"+e]})}),0),a("div",{staticClass:"page-content"},[a("img",{attrs:{src:t.imgSrc}})]),a("div",{staticClass:"page-footer"},[t._v(t._s(t.tips))])])},b=[],v=(a("4917"),a("96cf"),a("3b8d")),w=(a("ac6a"),a("a4bb")),y=a.n(w),x=a("d055"),L=a.n(x),C=a("951f"),k=a.n(C),A={data:function(){return{imgSrc:"",tips:"扫一扫向我付款",dataList:{alipay:{name:"支付宝",result:""},wechat:{name:"微信",result:""},qq:{name:"QQ",result:""}},current:""}},computed:{showDataList:function(){var t=this,e=y()(this.dataList).filter(function(e){return t.dataList[e].result&&!t.current||t.current===e}),a={};return y()(this.dataList).forEach(function(n){-1!==e.indexOf(n)&&(a[n]=t.dataList[n])}),a}},mounted:function(){var t=Object(v["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(y()(this.dataList).forEach(function(t){a.dataList[t].result=decodeURIComponent(a.$utils.getQueryVariable(t))}),this.$utils.getQueryVariable("production")){t.next=8;break}return this.current="",t.next=5,L.a.toDataURL("".concat(window.location.href,"&production=1"));case 5:return this.imgSrc=t.sent,k()(document.body).then(function(t){var e=t.toDataURL(),a=new Image;a.src=e,a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.width="100%",document.body.appendChild(a),alert("你可以通过长按来保存当前图片")}),t.abrupt("return");case 8:if(!navigator.userAgent.match(/Alipay/i)){t.next=20;break}if(!this.dataList.alipay.result){t.next=17;break}return t.next=12,L.a.toDataURL(this.dataList.alipay.result);case 12:this.imgSrc=t.sent,window.location.href=alipayUrl,this.current="alipay",t.next=18;break;case 17:alert("不支持支付宝付款");case 18:t.next=52;break;case 20:if(!navigator.userAgent.match(/MicroMessenger\//i)){t.next=32;break}if(!this.dataList.wechat.result){t.next=29;break}return t.next=24,L.a.toDataURL(this.dataList.wechat.result);case 24:this.imgSrc=t.sent,this.tips="长按识别二维码",this.current="wechat",t.next=30;break;case 29:alert("不支持微信付款");case 30:t.next=52;break;case 32:if(!navigator.userAgent.match(/QQ\//i)){t.next=44;break}if(!this.dataList.qq.result){t.next=41;break}return t.next=36,L.a.toDataURL(this.dataList.qq.result);case 36:this.imgSrc=t.sent,this.tips="长按识别二维码",this.current="qq",t.next=42;break;case 41:alert("不支持QQ付款");case 42:t.next=52;break;case 44:return t.next=46,L.a.toDataURL(window.location.href);case 46:this.imgSrc=t.sent,this.tips="扫一扫向我付款",this.current="",e=document.createElement("a"),e.href="alipays://platformapi/startapp?saId=10000007&qrcode=".concat(encodeURIComponent(this.dataList.alipay.result)),e.click();case 52:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},q=A,I=(a("f700"),Object(p["a"])(q,g,b,!1,null,"1d116f06",null)),S=I.exports,_={components:{MakePage:m,ResultPage:S},data:function(){return{showMake:!0}},methods:{},mounted:function(){var t=decodeURIComponent(this.$utils.getQueryVariable("alipay")),e=decodeURIComponent(this.$utils.getQueryVariable("wechat")),a=decodeURIComponent(this.$utils.getQueryVariable("qq"));this.showMake=!(t||e||a)}},M=_,R=(a("6135"),a("b0a0"),Object(p["a"])(M,i,s,!1,null,"c651858c",null)),j=R.exports;n["a"].config.productionTip=!1,n["a"].prototype.$utils=r,new n["a"]({render:function(t){return t(j)}}).$mount("#app")},6135:function(t,e,a){"use strict";var n=a("8e03"),r=a.n(n);r.a},"8e03":function(t,e,a){},"93b6":function(t,e,a){"use strict";var n=a("50c4"),r=a.n(n);r.a},b0a0:function(t,e,a){"use strict";var n=a("07bb"),r=a.n(n);r.a},f700:function(t,e,a){"use strict";var n=a("5429"),r=a.n(n);r.a}});
//# sourceMappingURL=app.7a7cabae.js.map